<p id="notice"><%= notice %></p>

<h1>Activity <%= @activity.id %></h1>

<div data-psd-component-class="ActivityRealTimeUpdates" data-psd-component-parameters='{"url" : "<%= activity_real_time_updates_path(@activity) %>"}'>
</div>
<%= bootstrap_form_for @activity, action: 'show', :html => { :class => 'form-inline activity-desc' } do |f| %>
  <%= f.text_field :activity_type, :value => @activity.activity_type.name,:readonly => true %>
  <%= f.text_field :instrument, :value => @activity.instrument.barcode,:readonly => true %>
  <%= f.text_field :kit, :value => @activity.kit.barcode,:readonly => true %>
  <!-- %= f.text_field :tube_printer, :value => @current_user.tube_printer_name,:readonly => true %>
  < % = f.text_field :plate_printer, :value => @current_user.plate_printer_name,:readonly => true % -->
<% end %>
<%= render :partial => 'printers_selection' %>
<% if @assets && !@activity.finished? %>
  <div class="firststeptype"><%= render :template => 'step_types/active' %></div>
<% end %>

<% if @activity.finished? %>
<div class="panel">
  This activity was finished at <%= @activity.completed_at %>
</div>
<% else %>

<div>

<!-- Tab panes -->
  <div class="tab-content asset-groups">
      <label class="control-label">What do I have?</label>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#asset-group-container" aria-controls="asset-group-container" role="tab" data-toggle="tab">Main</a></li>
      <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Profile</a></li>
      <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Messages</a></li>
      <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a></li>
    </ul>

    <div role="tabpanel" class="tab-pane active"  id="asset-group-container">
    <%= render :template => 'asset_groups/show' %>
    </div>
    <div role="tabpanel" class="tab-pane" id="profile">
      <%= render :template => 'asset_groups/show' %>
    </div>
    <div role="tabpanel" class="tab-pane" id="messages">
      <%= render :template => 'asset_groups/show' %>
    </div>
    <div role="tabpanel" class="tab-pane" id="settings">
      <%= render :template => 'asset_groups/show' %>
    </div>
  </div>

</div>

<% end %>
<% if @assets && !@activity.finished? %>
  <div class="laststeptype"><%= render :template => 'step_types/active' %></div>
<% end %>

  <div id="steps_finished">
  <%= render :template =>'steps/finished' %>
  </div>

  <% unless @activity.finished? %>
    <%= bootstrap_form_for @activity, action: 'update', :html => {:class => 'operator-allowed'} do |f| %>
      <input type="hidden" name="user_barcode" value="" />
      <button name="finish" class='btn btn-danger'>Finish activity?</button> &nbsp;
    <% end %>
  <% end %>
<%= bootstrap_link_to 'Back', :back %>
