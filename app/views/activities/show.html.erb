<div>
  Instrument: <%= @activity.instrument.barcode %>
</div>
<div>
  Kit: <%= @activity.kit.barcode %>
</div>
<p id="notice"><%= notice %></p>

<%= bootstrap_form_for @activity, action: 'show' do |f| %>
  <%= render :partial => 'barcode_reader' %>
  <%= f.submit "Add barcode" %>
<% end %>

<% if @assets %>
    <div>
      <h3>Barcodes</h3>
      <% @assets.uniq.each_with_index do |asset, i| %>
        <div><%= asset.barcode %>: <%= asset.facts.map{|f| f.predicate+':'+f.object}.join(',')%>
          <%= bootstrap_form_for @activity, action: 'update' do |f| %>
            <input type="hidden" name="delete_barcode[<%= i %>]" value="<%= asset.barcode %>" />
            <button type="submit">Delete</button>
          <% end %>
        </div>
      <% end %>
    </div>
  <%= render :partial =>'steps/active', :locals => {
    :step_types => @step_types,
    :activity => @activity }
    %>
  <%= render :partial =>'steps/finished', :locals => {:steps => @steps} %>
<% else %>
  <%= render :partial =>'steps/finished', :locals => {:steps => @steps } %>
<% end %>
<%= bootstrap_link_to 'Edit', edit_activity_path(@activity) %> |
<%= bootstrap_link_to 'Back', activities_path %>
