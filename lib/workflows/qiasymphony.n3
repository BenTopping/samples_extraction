:activity :activityTypeName """QIASymphony""" .

{
  ?p :a :SampleTube .
  ?p :is :NotStarted .
  ?q :maxCardinality """1""" .
} => {
  :step :stepTypeName """Create a Rack for QIASymphony""" .
  :step :addFacts {
    ?p :is :Started .
  } .
  :step :removeFacts {
    ?p :is :NotStarted .
  } .
  :step :createAsset {
    ?q :a :TubeRack .
    ?q :is :SymphonyCreated .
  }.
} .

{
  ?p :a :SampleTube .
  ?p :is :Started .
  ?q :a :TubeRack .
  ?q :is :SymphonyCreated .
  ?q :maxCardinality """1""" .
} => {
  :step :addFacts { ?p :is :Started .}.
  :step :stepTypeName """Put tubes into rack for QIASymphony""" .
  :step :stepTemplate """racking_by_columns""" .
  :step :unselectAsset ?p .
} .

{
    ?q :a :TubeRack .
    ?q :is :SymphonyCreated .
    ?q :maxCardinality """1""" .
}=> {
  :step :stepTypeName """Upload Symphony XML file""" .
  :step :stepTemplate """upload_file_step""" .
  :step :description """This step will create a new rack by using the xml provided and the list of tubes in the group, racking them in column order""" .
  :step :addFacts {?q :is :SymphonyLoaded .}.
  :step :removeFacts {?q :is :SymphonyCreated .}.
}.

{
    ?q :a :TubeRack .
    ?q :is :SymphonyLoaded .
    ?q :maxCardinality """1""" .
}=> {
  :step :stepTypeName """Re-upload Symphony XML file""" .
  :step :stepTemplate """upload_file_step""" .
  :step :description """This step will create a new rack by using the xml provided and the list of tubes in the group, racking them in column order""" .
  :step :addFacts {?q :is :SymphonyLoaded .}.
}.

{
    ?q :a :TubeRack .
    ?q :is :SymphonyLoaded .
    ?q :maxCardinality """1""" .
}=> {
  :step :stepTypeName """Push changes to Sequencescape""" .
  :step :addFacts {?q :pushTo :Sequencescape .}.
}.

